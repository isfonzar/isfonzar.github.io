<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Setting up a Kubernetes Cluster - Part 1 | Icaro’s Tech Blog</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Setting up a Kubernetes Cluster - Part 1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is going to be a series of posts on how to set up a Kubernetes cluster from scratch. Although there are many1,2,3,4 managed Kubernetes providers, setting up a Kubernetes cluster yourself helps you to better understand the underlying workings of it and that’s the goal of this series of posts." />
<meta property="og:description" content="This is going to be a series of posts on how to set up a Kubernetes cluster from scratch. Although there are many1,2,3,4 managed Kubernetes providers, setting up a Kubernetes cluster yourself helps you to better understand the underlying workings of it and that’s the goal of this series of posts." />
<link rel="canonical" href="http://localhost:4000/infrastructure/kubernetes/setting-up-a-kubernetes-cluster-1/" />
<meta property="og:url" content="http://localhost:4000/infrastructure/kubernetes/setting-up-a-kubernetes-cluster-1/" />
<meta property="og:site_name" content="Icaro’s Tech Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-14T12:40:31+02:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"http://localhost:4000/infrastructure/kubernetes/setting-up-a-kubernetes-cluster-1/","headline":"Setting up a Kubernetes Cluster - Part 1","dateModified":"2020-05-14T12:40:31+02:00","datePublished":"2020-05-14T12:40:31+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/infrastructure/kubernetes/setting-up-a-kubernetes-cluster-1/"},"description":"This is going to be a series of posts on how to set up a Kubernetes cluster from scratch. Although there are many1,2,3,4 managed Kubernetes providers, setting up a Kubernetes cluster yourself helps you to better understand the underlying workings of it and that’s the goal of this series of posts.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Icaro's Tech Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Icaro&#39;s Tech Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About me</a><a class="page-link" href="/quotes">Quotes</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Setting up a Kubernetes Cluster - Part 1</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-05-14T12:40:31+02:00" itemprop="datePublished">May 14, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>This is going to be a series of posts on how to set up a Kubernetes cluster from scratch.
Although there are many<sup><a href="https://aws.amazon.com/eks/">1</a>,<a href="https://cloud.google.com/kubernetes/">2</a>,<a href="https://www.oracle.com/cloud/compute/container-engine-kubernetes.html">3</a>,<a href="https://www.digitalocean.com/products/kubernetes/">4</a></sup> managed Kubernetes providers, setting up a Kubernetes cluster yourself helps you to better understand the underlying workings of it and that’s the goal of this series of posts.</p>

<h2 id="introduction">Introduction</h2>

<h3 id="what-is-kubernetes">What is Kubernetes?</h3>

<p>Kubernetes is an <a href="https://github.com/kubernetes/kubernetes">open-source</a> container orchestration and management system. It was originally designed by Google in 2014 and donated to the <a href="https://www.cncf.io/">Cloud Native Computing Foundation</a> in 2015.</p>

<h3 id="why-use-kubernetes">Why use Kubernetes?</h3>

<p>Kubernetes provides the tools to help us with the task of running containers in a distributed environment.
Kubernetes helps us with:</p>

<ul>
  <li>
    <p>Ensuring high availability</p>
  </li>
  <li>
    <p>Automaticly recovering when a container fails.</p>
  </li>
  <li>
    <p>Auto-scaling based on metrics (for instance, CPU or memory consumption)</p>
  </li>
  <li>
    <p>Service discovery</p>
  </li>
  <li>
    <p>Automated rollouts and rollbacks</p>
  </li>
  <li>
    <p>Automatic load balancing between containers</p>
  </li>
</ul>

<p>Among many other tasks.</p>

<p>Without an orchestration system for our containers, we would have to implement all of those solutions manually. Not only the resources could be better spent somewhere else (for instance, writing our application), but we would also be more prone to errors.</p>

<h2 id="kubernetes-components">Kubernetes Components</h2>

<p><img src="https://d33wubrfki0l68.cloudfront.net/7016517375d10c702489167e704dcb99e570df85/7bb53/images/docs/components-of-kubernetes.png" alt="" />
<em>(Kubernetes cluster and its components, from the oficial kubernetes documentation)</em></p>

<p>A Kubernetes cluster consists of an amount of worker machines (worker nodes), those will run the containers containing the applications and at least one worker node is necessary in a cluster.</p>

<p>Those worker nodes will host the <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/"><strong>Pods</strong></a> (basic unit of kubernetes, holds the containers that run the applications).</p>

<h3 id="control-plane">Control Plane</h3>

<p>The Control Plane is the container orchestration layer that exposes the API and interfaces to define, deploy and manage the lifecycle of containers.<sup><a href="https://kubernetes.io/docs/reference/glossary/?all=true#term-control-plane">1</a></sup></p>

<p>Although Control Plane’s components can be run on any machine in the cluster, in order to use the most out of Kubernetes, it’s recommended to use a dedicated machine for it.</p>

<h4 id="kube-apiserver"><a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/">kube-apiserver</a></h4>

<p><code class="highlighter-rouge">kube-apiserver</code> exposes the Kubernetes API and is the main way of interaction within the cluster.</p>

<h4 id="etcd"><a href="https://etcd.io/">etcd</a></h4>

<p>etcd is an <a href="https://github.com/etcd-io/etcd">open-source</a> key-value store for distributed systems. It’s used by Kubernetes to coordinate all the nodes in the cluster and share data with all its members.</p>

<h4 id="kube-scheduler">kube-scheduler</h4>

<p>The kube-scheduler is a component that assigns Pods to nodes, selecting the most suitable node for a pod by weighting in multiple factors like resources requirements, replication, etc.</p>

<h4 id="kube-controller-manager"><a href="https://kubernetes.io/docs/concepts/overview/components/#kube-controller-manager">kube-controller-manager</a></h4>

<p>This component of the Control Plane is responsible for running controller processes. It contains multiple processes that, in order to reduce complexity, run as a single process.</p>

<h4 id="cloud-controller-manager">cloud-controller-manager</h4>

<p>This is the component that holds cloud-specific control logic, since we will not be using a cloud provider in this guide, this will not be present in our control plane.</p>

<h3 id="worker-nodes">Worker Nodes</h3>

<h4 id="kubelet">kubelet</h4>

<p>kubelet is an agent that runs on each node in the cluster, it makes sure that containers are running in a pod.</p>

<h4 id="kube-proxy">kube-proxy</h4>

<p>This is the component that maintains network rules on nodes and allows for the pods to communicate inside and outside of the cluster.</p>

<h4 id="container-runtime">Container runtime</h4>

<p>The software responsible for running the containers. Example: Docker, containerd, etc.</p>

<hr />

<p>This first post is an introduction to the cluster architecture and its components. In the next part, we will begin setting up our cluster starting from the Control Plane.</p>

<h2 id="resources">Resources</h2>

<ul>
  <li><a href="https://kubernetes.io/docs/home/">Kubernetes Oficial documentation</a></li>
</ul>

  </div><div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://isfonzar.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            <a class="u-url" href="/infrastructure/kubernetes/setting-up-a-kubernetes-cluster-1/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Icaro&#39;s Tech Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Icaro&#39;s Tech Blog</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/isfonzar"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">isfonzar</span></a></li><li><a href="https://www.twitter.com/isfonzar"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">isfonzar</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>This is my personal tech blog. Here I share my learnings, guides and insights about projects I&#39;m working on.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
